<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="booking.css" rel="stylesheet">

  <script src="/booking.js"></script>

</head>

<body>
  <h1>Hello ! you are logged in</h1>
  <br>
  <form action="/show" method="post">
    <div class="row">
      <br><br>
      <div class="form-group col">
        <label for="currentLocation">Your location</label>
        <select id="currentLocation" class="form-control" name="locate" style="width:200px">
          <option>Hnlu</option>
          <option>Balco medical</option>
          <option>Sector-27</option>
          <option>Sector-29</option>
          <option>Ekatm path</option>
          <option>Indravati bhawan</option>
          <option>Mahanadi bhawan</option>
          <option>North block</option>
          <option>South block</option>
          <option>CBD</option>
          <option>Sector-15</option>
          <option>Telibanda</option>
          <option>DKS bhawan</option>
          <option>Railway Station</option>
        </select>
      </div>
      <br><br>

      <div class="form-group col ">
        <label for="destination">destination</label>
        <select id="destination" name="dest" class=" form-control" style="width:200px">
          <option>Hnlu</option>
          <option>Balco medical</option>
          <option>Sector-27</option>
          <option>Sector-29</option>
          <option>Ekatm path</option>
          <option>Indravati bhawan</option>
          <option>Mahanadi bhawan</option>
          <option>North block</option>
          <option>South block</option>
          <option>CBD</option>
          <option>Sector-15</option>
          <option>Telibanda</option>
          <option>DKS bhawan</option>
          <option>Railway Station</option>
        </select>
      </div>
      <div class="form-group col ">
        <label for="date">date</label>
        <input type="date" id="date" class="form-control" style="width:200px" name="date" <% if(users.date!=null) {%>
        value = <%= users.date%>
          <% }else {%>
            value ="2023-02-07";
            <%}%> >
      </div>
      <div class="form-group col ">
        <label for="timing">arrival time</label>
        <input type="time" id="timing " name="time" class="form-control" min="01:00" max="00:00" value="09:00"
          style="width:200px" required>
      </div>
      <div>

        <button id="search" class="form-control"
          style="width:100px ;color:rgb(238, 238, 245); background-color:rgb(48, 88, 113);" class="btn-primary">search
        </button>
      </div>
  </form>
  <% if(info.user){%>
    <h3 style="margin-top:50px;">buses available</h3>
    <table class="table table-light" id="abc">
      <thead>
        <tr>
          <th>&nbsp;&nbsp;Bus No</th>
          <th>Current Location</th>
          <th>Destination</th>
          <th>Arrival Time</th>
          <th>Reaching Time</th>
          <th>amount</th>
          <th>day</th>
        </tr>

      </thead>
      <tbody>
        <% for(i=0;i<datas.length;i++){%>
          <tr>
            <td> &nbsp;&nbsp; <%= datas[i].busno %>
            </td>
            <td>
              <%=datas[i].currentlocation %>
            </td>
            <td>
              <%= datas[i].destination %>
            </td>
            <td>
              <%= datas[i].arrivaltime %>
            </td>
            <td>
              <%= datas[i].reachingtime %>
            </td>
            <td>
              <%= datas[i].amt %>
            </td>
            <td>
              <%= datas[i].day %>
            </td>

            <td><button type="button" class="btn btn-outline-success" onclick="change()">click here to book now</button>
            </td>
          </tr>
          <% }%>
      </tbody>
    </table>

    <% }else {%>
      <br><br>
      <h3 style="margin-top:50px; text-align:center;">Try searching for valid location</h3>
      <% }%>
        <div style="background-color:burlywood  ">

          <h1 style="text-align:center;">book your bus seat !</h1>
          <div class="card " id="payment" style="width: 18rem;  border: 2px solid;  margin:auto;">


            <h5 class="card-title " style="color:green; padding-left:45px;">booking confirmation</h5>
            <hr>
            <div class="card-body">
              <form method="post" action="/payment" id="frm1">
                <input type="text" placeholder="name" name="username" required>
                <input type="number" placeholder="amount" name="amt" required>
                <input type="email" placeholder="email-id" name="emailid" required>
                <input type="number" placeholder="bus-no" name="busno" required>
                <input type="number" placeholder="no of seats" name="seats">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                  BOOK NOW</button>
              </form>
            </div>
          </div>
        </div>
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">

              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

              <button type="submit" class="btn btn-primary" form="frm1">book</button>
            </div>
          </div>
        </div>
        </div>
        <script>

          function change() {

            x = document.getElementById('payment');
            if (x.style.display == "none") {
              x.style.display = "block";
            } else {
              x.style.display = "none";
            }
          }

        </script>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
          integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
          crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js"
          integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
</body>

</html>